= The Lecharny Challenge

image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]

The goal of this repository is to check the performance of various implementations of an algorithm that:

* given an input string
* replaces all sequences of `\r\n `, `\n\r `, `\r ` or `\n ` with an empty string

Algorithm *must* be run in the JVM.

= Executing the benchmark

----
./gradlew jmh
----

= Correctness

The current version of the repository doesn't check the correctness of the algorithms. Some have been proposed which
are *incorrect*!

Unit tests can be launched with:

----
./gradlew test
----

= Integration with IntelliJ

To use in IntelliJ, first run:

----
./gradlew idea
----

Then open the generated project.

= Results

Below you will find the *latest results of the benchmark, as executed on Travis CI*. This section is automatically
updated.

// PLEASE DO NOT EDIT BELOW.
// See gradle/results.gradle to understand why!

== Results on JDK 8

// start::jdk8
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate2
|11257.64805 ops/ms
|±434.907321 ops/ms

|2
|unfold_cedric_groovy_bytecode
|10608.853388 ops/ms
|±330.037093 ops/ms

|3
|unfold_cedric_ultimate2_with_else
|10444.204806 ops/ms
|±514.529671 ops/ms

|4
|unfold_cedric_groovy
|10527.75262 ops/ms
|±747.960584 ops/ms

|5
|unfold_olivier2
|9987.14374 ops/ms
|±558.144387 ops/ms

|6
|unfold_cedric_improved
|9682.702535 ops/ms
|±685.837464 ops/ms

|7
|unfold_henri_newarray
|9068.068745 ops/ms
|±264.784901 ops/ms

|8
|unfold_henri_noplusplus
|9310.075764 ops/ms
|±608.455155 ops/ms

|9
|unfold_henri_submethods
|9336.816793 ops/ms
|±879.205264 ops/ms

|10
|unfold_cedric_ultimate2_ternary
|8573.454361 ops/ms
|±386.928839 ops/ms

|11
|unfold_cedric_ultimate
|8619.467513 ops/ms
|±452.916289 ops/ms

|12
|unfold_cedric
|8470.743356 ops/ms
|±305.167308 ops/ms

|13
|unfold_henri_unsafe
|8678.151232 ops/ms
|±618.478804 ops/ms

|14
|unfold_henri_arraycopy
|6893.457986 ops/ms
|±207.881194 ops/ms

|15
|unfold_mbo
|3454.485596 ops/ms
|±520.256941 ops/ms

|16
|unfold_unfold_common
|2681.091816 ops/ms
|±144.121727 ops/ms

|17
|unfold_regexp_compiled
|1203.341786 ops/ms
|±76.947323 ops/ms

|18
|unfold_regexp
|612.61611 ops/ms
|±20.206456 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy
|2559.686103 ops/ms
|±209.628271 ops/ms

|2
|unfold_cedric_ultimate2
|2439.761053 ops/ms
|±143.709379 ops/ms

|3
|unfold_henri_unsafe
|2375.514847 ops/ms
|±94.547504 ops/ms

|4
|unfold_henri_submethods
|2356.57625 ops/ms
|±135.561149 ops/ms

|5
|unfold_cedric_ultimate2_with_else
|2253.829961 ops/ms
|±112.695912 ops/ms

|6
|unfold_henri_noplusplus
|2129.508826 ops/ms
|±93.635531 ops/ms

|7
|unfold_cedric_groovy_bytecode
|2117.160571 ops/ms
|±100.813517 ops/ms

|8
|unfold_cedric
|1986.288379 ops/ms
|±39.172677 ops/ms

|9
|unfold_cedric_ultimate2_ternary
|2003.42027 ops/ms
|±60.183288 ops/ms

|10
|unfold_cedric_improved
|1843.616356 ops/ms
|±47.80425 ops/ms

|11
|unfold_olivier2
|1882.251991 ops/ms
|±101.37504 ops/ms

|12
|unfold_cedric_ultimate
|1839.49438 ops/ms
|±58.90376 ops/ms

|13
|unfold_henri_newarray
|1742.711313 ops/ms
|±74.525816 ops/ms

|14
|unfold_henri_arraycopy
|1396.474631 ops/ms
|±34.80784 ops/ms

|15
|unfold_mbo
|1325.850821 ops/ms
|±80.22026 ops/ms

|16
|unfold_unfold_common
|843.465797 ops/ms
|±46.51833 ops/ms

|17
|unfold_regexp_compiled
|194.381905 ops/ms
|±8.325728 ops/ms

|18
|unfold_regexp
|160.580264 ops/ms
|±9.360502 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy_bytecode
|234.180515 ops/ms
|±6.940663 ops/ms

|2
|unfold_cedric_ultimate
|229.377761 ops/ms
|±7.022905 ops/ms

|3
|unfold_cedric_improved
|226.155038 ops/ms
|±4.408854 ops/ms

|4
|unfold_henri_submethods
|229.442741 ops/ms
|±8.720424 ops/ms

|5
|unfold_cedric
|222.482721 ops/ms
|±9.559742 ops/ms

|6
|unfold_cedric_groovy
|222.017691 ops/ms
|±9.674042 ops/ms

|7
|unfold_cedric_ultimate2_ternary
|220.085061 ops/ms
|±7.931281 ops/ms

|8
|unfold_cedric_ultimate2
|217.017584 ops/ms
|±5.12162 ops/ms

|9
|unfold_henri_unsafe
|211.582314 ops/ms
|±7.35231 ops/ms

|10
|unfold_cedric_ultimate2_with_else
|203.981623 ops/ms
|±4.280576 ops/ms

|11
|unfold_henri_noplusplus
|199.894564 ops/ms
|±5.213106 ops/ms

|12
|unfold_henri_newarray
|165.204188 ops/ms
|±7.766101 ops/ms

|13
|unfold_olivier2
|152.358579 ops/ms
|±3.11125 ops/ms

|14
|unfold_henri_arraycopy
|125.966435 ops/ms
|±1.907226 ops/ms

|15
|unfold_mbo
|113.403181 ops/ms
|±4.475539 ops/ms

|16
|unfold_unfold_common
|34.745764 ops/ms
|±1.88378 ops/ms

|17
|unfold_regexp_compiled
|25.639853 ops/ms
|±0.566434 ops/ms

|18
|unfold_regexp
|25.346705 ops/ms
|±1.24877 ops/ms

|===

// end::jdk8

== Results on JDK 7

// start::jdk7
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate
|10997.826301 ops/ms
|±602.466697 ops/ms

|2
|unfold_cedric_groovy
|10872.606492 ops/ms
|±728.105386 ops/ms

|3
|unfold_cedric_ultimate2
|10576.627126 ops/ms
|±469.151759 ops/ms

|4
|unfold_cedric_ultimate2_ternary
|10681.767828 ops/ms
|±639.867739 ops/ms

|5
|unfold_olivier2
|9929.458489 ops/ms
|±552.416991 ops/ms

|6
|unfold_cedric_groovy_bytecode
|10040.547487 ops/ms
|±663.650606 ops/ms

|7
|unfold_cedric_ultimate2_with_else
|10325.479114 ops/ms
|±996.679597 ops/ms

|8
|unfold_cedric_improved
|9220.241219 ops/ms
|±693.26439 ops/ms

|9
|unfold_cedric
|8528.12683 ops/ms
|±446.946111 ops/ms

|10
|unfold_henri_newarray
|8585.615939 ops/ms
|±632.299439 ops/ms

|11
|unfold_henri_arraycopy
|8227.585392 ops/ms
|±371.996952 ops/ms

|12
|unfold_henri_submethods
|8514.902272 ops/ms
|±869.682429 ops/ms

|13
|unfold_henri_unsafe
|7628.728425 ops/ms
|±467.25411 ops/ms

|14
|unfold_henri_noplusplus
|7299.802972 ops/ms
|±826.58231 ops/ms

|15
|unfold_mbo
|5263.955863 ops/ms
|±293.690536 ops/ms

|16
|unfold_unfold_common
|2441.816295 ops/ms
|±64.87427 ops/ms

|17
|unfold_regexp_compiled
|1336.048362 ops/ms
|±25.195519 ops/ms

|18
|unfold_regexp
|674.031553 ops/ms
|±13.429436 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate
|2295.644215 ops/ms
|±131.357414 ops/ms

|2
|unfold_cedric_ultimate2_ternary
|2259.167874 ops/ms
|±98.372213 ops/ms

|3
|unfold_cedric
|2243.461774 ops/ms
|±124.004684 ops/ms

|4
|unfold_cedric_groovy
|2093.611897 ops/ms
|±105.713699 ops/ms

|5
|unfold_cedric_ultimate2_with_else
|2082.053588 ops/ms
|±109.188522 ops/ms

|6
|unfold_cedric_ultimate2
|2127.07668 ops/ms
|±169.61026 ops/ms

|7
|unfold_cedric_groovy_bytecode
|2110.024547 ops/ms
|±209.709775 ops/ms

|8
|unfold_henri_submethods
|1956.048588 ops/ms
|±164.569834 ops/ms

|9
|unfold_henri_newarray
|1862.589379 ops/ms
|±170.034525 ops/ms

|10
|unfold_henri_arraycopy
|1755.024538 ops/ms
|±98.916633 ops/ms

|11
|unfold_henri_unsafe
|1683.468014 ops/ms
|±112.263334 ops/ms

|12
|unfold_cedric_improved
|1651.29165 ops/ms
|±84.355376 ops/ms

|13
|unfold_henri_noplusplus
|1614.447354 ops/ms
|±112.454221 ops/ms

|14
|unfold_olivier2
|1533.292056 ops/ms
|±91.62525 ops/ms

|15
|unfold_mbo
|1269.772558 ops/ms
|±48.193287 ops/ms

|16
|unfold_unfold_common
|533.208987 ops/ms
|±36.116649 ops/ms

|17
|unfold_regexp_compiled
|175.705716 ops/ms
|±7.122307 ops/ms

|18
|unfold_regexp
|147.545517 ops/ms
|±8.556775 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate
|263.378827 ops/ms
|±13.089815 ops/ms

|2
|unfold_cedric_groovy
|259.66009 ops/ms
|±9.383269 ops/ms

|3
|unfold_cedric_ultimate2_ternary
|262.351076 ops/ms
|±15.570974 ops/ms

|4
|unfold_cedric_ultimate2_with_else
|252.330184 ops/ms
|±8.155953 ops/ms

|5
|unfold_cedric_ultimate2
|250.086055 ops/ms
|±16.52759 ops/ms

|6
|unfold_henri_submethods
|246.394952 ops/ms
|±16.035919 ops/ms

|7
|unfold_cedric
|234.476694 ops/ms
|±16.042577 ops/ms

|8
|unfold_cedric_groovy_bytecode
|242.253007 ops/ms
|±26.923419 ops/ms

|9
|unfold_cedric_improved
|211.226187 ops/ms
|±9.418537 ops/ms

|10
|unfold_henri_noplusplus
|216.270965 ops/ms
|±17.204995 ops/ms

|11
|unfold_olivier2
|197.126653 ops/ms
|±5.406307 ops/ms

|12
|unfold_henri_unsafe
|197.062671 ops/ms
|±6.63158 ops/ms

|13
|unfold_henri_arraycopy
|195.810485 ops/ms
|±9.05922 ops/ms

|14
|unfold_mbo
|174.787274 ops/ms
|±8.240503 ops/ms

|15
|unfold_henri_newarray
|173.597576 ops/ms
|±23.716838 ops/ms

|16
|unfold_unfold_common
|45.553601 ops/ms
|±2.20512 ops/ms

|17
|unfold_regexp
|18.514202 ops/ms
|±0.853285 ops/ms

|18
|unfold_regexp_compiled
|18.644011 ops/ms
|±1.442136 ops/ms

|===

// end::jdk7

== Results on JDK 6

// start::jdk6
Please check the CI build image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]
because the results for JDK 6 cannot be automatically fetched.
// end::jdk6

