= The Lecharny Challenge

image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]

The goal of this repository is to check the performance of various implementations of an algorithm that:

* given an input string
* replaces all sequences of `\r\n `, `\n\r `, `\r ` or `\n ` with an empty string

Algorithm *must* be run in the JVM.

= Executing the benchmark

----
./gradlew jmh
----

= Correctness

The current version of the repository doesn't check the correctness of the algorithms. Some have been proposed which
are *incorrect*!

Unit tests can be launched with:

----
./gradlew test
----

= Integration with IntelliJ

To use in IntelliJ, first run:

----
./gradlew idea
----

Then open the generated project.

= Results

Below you will find the *latest results of the benchmark, as executed on Travis CI*. This section is automatically
updated.

// PLEASE DO NOT EDIT BELOW.
// See gradle/results.gradle to understand why!

== Results on JDK 8

// start::jdk8
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate2
|11257.64805 ops/ms
|±434.907321 ops/ms

|2
|unfold_cedric_groovy_bytecode
|10608.853388 ops/ms
|±330.037093 ops/ms

|3
|unfold_cedric_ultimate2_with_else
|10444.204806 ops/ms
|±514.529671 ops/ms

|4
|unfold_cedric_groovy
|10527.75262 ops/ms
|±747.960584 ops/ms

|5
|unfold_olivier2
|9987.14374 ops/ms
|±558.144387 ops/ms

|6
|unfold_cedric_improved
|9682.702535 ops/ms
|±685.837464 ops/ms

|7
|unfold_henri_newarray
|9068.068745 ops/ms
|±264.784901 ops/ms

|8
|unfold_henri_noplusplus
|9310.075764 ops/ms
|±608.455155 ops/ms

|9
|unfold_henri_submethods
|9336.816793 ops/ms
|±879.205264 ops/ms

|10
|unfold_cedric_ultimate2_ternary
|8573.454361 ops/ms
|±386.928839 ops/ms

|11
|unfold_cedric_ultimate
|8619.467513 ops/ms
|±452.916289 ops/ms

|12
|unfold_cedric
|8470.743356 ops/ms
|±305.167308 ops/ms

|13
|unfold_henri_unsafe
|8678.151232 ops/ms
|±618.478804 ops/ms

|14
|unfold_henri_arraycopy
|6893.457986 ops/ms
|±207.881194 ops/ms

|15
|unfold_mbo
|3454.485596 ops/ms
|±520.256941 ops/ms

|16
|unfold_unfold_common
|2681.091816 ops/ms
|±144.121727 ops/ms

|17
|unfold_regexp_compiled
|1203.341786 ops/ms
|±76.947323 ops/ms

|18
|unfold_regexp
|612.61611 ops/ms
|±20.206456 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy
|2559.686103 ops/ms
|±209.628271 ops/ms

|2
|unfold_cedric_ultimate2
|2439.761053 ops/ms
|±143.709379 ops/ms

|3
|unfold_henri_unsafe
|2375.514847 ops/ms
|±94.547504 ops/ms

|4
|unfold_henri_submethods
|2356.57625 ops/ms
|±135.561149 ops/ms

|5
|unfold_cedric_ultimate2_with_else
|2253.829961 ops/ms
|±112.695912 ops/ms

|6
|unfold_henri_noplusplus
|2129.508826 ops/ms
|±93.635531 ops/ms

|7
|unfold_cedric_groovy_bytecode
|2117.160571 ops/ms
|±100.813517 ops/ms

|8
|unfold_cedric
|1986.288379 ops/ms
|±39.172677 ops/ms

|9
|unfold_cedric_ultimate2_ternary
|2003.42027 ops/ms
|±60.183288 ops/ms

|10
|unfold_cedric_improved
|1843.616356 ops/ms
|±47.80425 ops/ms

|11
|unfold_olivier2
|1882.251991 ops/ms
|±101.37504 ops/ms

|12
|unfold_cedric_ultimate
|1839.49438 ops/ms
|±58.90376 ops/ms

|13
|unfold_henri_newarray
|1742.711313 ops/ms
|±74.525816 ops/ms

|14
|unfold_henri_arraycopy
|1396.474631 ops/ms
|±34.80784 ops/ms

|15
|unfold_mbo
|1325.850821 ops/ms
|±80.22026 ops/ms

|16
|unfold_unfold_common
|843.465797 ops/ms
|±46.51833 ops/ms

|17
|unfold_regexp_compiled
|194.381905 ops/ms
|±8.325728 ops/ms

|18
|unfold_regexp
|160.580264 ops/ms
|±9.360502 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy_bytecode
|234.180515 ops/ms
|±6.940663 ops/ms

|2
|unfold_cedric_ultimate
|229.377761 ops/ms
|±7.022905 ops/ms

|3
|unfold_cedric_improved
|226.155038 ops/ms
|±4.408854 ops/ms

|4
|unfold_henri_submethods
|229.442741 ops/ms
|±8.720424 ops/ms

|5
|unfold_cedric
|222.482721 ops/ms
|±9.559742 ops/ms

|6
|unfold_cedric_groovy
|222.017691 ops/ms
|±9.674042 ops/ms

|7
|unfold_cedric_ultimate2_ternary
|220.085061 ops/ms
|±7.931281 ops/ms

|8
|unfold_cedric_ultimate2
|217.017584 ops/ms
|±5.12162 ops/ms

|9
|unfold_henri_unsafe
|211.582314 ops/ms
|±7.35231 ops/ms

|10
|unfold_cedric_ultimate2_with_else
|203.981623 ops/ms
|±4.280576 ops/ms

|11
|unfold_henri_noplusplus
|199.894564 ops/ms
|±5.213106 ops/ms

|12
|unfold_henri_newarray
|165.204188 ops/ms
|±7.766101 ops/ms

|13
|unfold_olivier2
|152.358579 ops/ms
|±3.11125 ops/ms

|14
|unfold_henri_arraycopy
|125.966435 ops/ms
|±1.907226 ops/ms

|15
|unfold_mbo
|113.403181 ops/ms
|±4.475539 ops/ms

|16
|unfold_unfold_common
|34.745764 ops/ms
|±1.88378 ops/ms

|17
|unfold_regexp_compiled
|25.639853 ops/ms
|±0.566434 ops/ms

|18
|unfold_regexp
|25.346705 ops/ms
|±1.24877 ops/ms

|===

// end::jdk8

== Results on JDK 7

// start::jdk7
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_henri_noplusplus
|13009.314216 ops/ms
|±207.62783 ops/ms

|2
|unfold_cedric_ultimate2
|13094.666549 ops/ms
|±317.73083 ops/ms

|3
|unfold_cedric_groovy
|13175.539133 ops/ms
|±422.256675 ops/ms

|4
|unfold_cedric_ultimate2_with_else
|12922.082589 ops/ms
|±333.943671 ops/ms

|5
|unfold_cedric_ultimate2_ternary
|12986.535704 ops/ms
|±629.411258 ops/ms

|6
|unfold_henri_submethods
|12546.780817 ops/ms
|±204.931547 ops/ms

|7
|unfold_cedric_ultimate
|12715.105847 ops/ms
|±477.40257 ops/ms

|8
|unfold_cedric_improved
|12277.346055 ops/ms
|±331.87775 ops/ms

|9
|unfold_cedric_groovy_bytecode
|12044.512992 ops/ms
|±442.050928 ops/ms

|10
|unfold_henri_newarray
|12023.424253 ops/ms
|±772.358718 ops/ms

|11
|unfold_cedric
|10828.875469 ops/ms
|±582.925424 ops/ms

|12
|unfold_henri_arraycopy
|10755.646265 ops/ms
|±548.918646 ops/ms

|13
|unfold_olivier2
|9160.80492 ops/ms
|±935.220409 ops/ms

|14
|unfold_henri_unsafe
|8302.976729 ops/ms
|±348.788045 ops/ms

|15
|unfold_mbo
|5473.681664 ops/ms
|±286.684997 ops/ms

|16
|unfold_unfold_common
|3062.516904 ops/ms
|±121.223544 ops/ms

|17
|unfold_regexp_compiled
|1458.999912 ops/ms
|±47.425124 ops/ms

|18
|unfold_regexp
|703.30375 ops/ms
|±12.857255 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy
|3196.007108 ops/ms
|±129.695976 ops/ms

|2
|unfold_cedric_groovy_bytecode
|3115.896124 ops/ms
|±225.80818 ops/ms

|3
|unfold_henri_newarray
|2914.967939 ops/ms
|±110.223416 ops/ms

|4
|unfold_henri_submethods
|2890.966677 ops/ms
|±107.010138 ops/ms

|5
|unfold_cedric_ultimate
|2814.580727 ops/ms
|±43.019936 ops/ms

|6
|unfold_henri_noplusplus
|2864.495953 ops/ms
|±146.842184 ops/ms

|7
|unfold_cedric_ultimate2_ternary
|2725.415554 ops/ms
|±101.745243 ops/ms

|8
|unfold_cedric_ultimate2
|2677.294685 ops/ms
|±183.511358 ops/ms

|9
|unfold_cedric_ultimate2_with_else
|2633.56023 ops/ms
|±186.599773 ops/ms

|10
|unfold_cedric
|2443.774831 ops/ms
|±67.480159 ops/ms

|11
|unfold_cedric_improved
|2455.564983 ops/ms
|±200.086174 ops/ms

|12
|unfold_henri_arraycopy
|2294.695879 ops/ms
|±128.571514 ops/ms

|13
|unfold_henri_unsafe
|1650.943711 ops/ms
|±79.377781 ops/ms

|14
|unfold_olivier2
|1589.564903 ops/ms
|±36.482969 ops/ms

|15
|unfold_mbo
|949.471396 ops/ms
|±131.225682 ops/ms

|16
|unfold_unfold_common
|410.250092 ops/ms
|±27.830662 ops/ms

|17
|unfold_regexp_compiled
|192.061343 ops/ms
|±2.53454 ops/ms

|18
|unfold_regexp
|170.071816 ops/ms
|±4.344572 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_henri_noplusplus
|312.415817 ops/ms
|±4.010859 ops/ms

|2
|unfold_cedric_ultimate2_with_else
|310.239028 ops/ms
|±3.884475 ops/ms

|3
|unfold_cedric_groovy
|311.351231 ops/ms
|±12.73203 ops/ms

|4
|unfold_cedric_ultimate
|301.69936 ops/ms
|±7.825026 ops/ms

|5
|unfold_cedric_ultimate2_ternary
|292.73355 ops/ms
|±6.332449 ops/ms

|6
|unfold_cedric_ultimate2
|285.640746 ops/ms
|±10.475285 ops/ms

|7
|unfold_cedric
|289.86623 ops/ms
|±15.368431 ops/ms

|8
|unfold_henri_submethods
|287.693407 ops/ms
|±13.61355 ops/ms

|9
|unfold_cedric_groovy_bytecode
|278.341641 ops/ms
|±5.572187 ops/ms

|10
|unfold_henri_arraycopy
|259.104583 ops/ms
|±11.605439 ops/ms

|11
|unfold_cedric_improved
|246.726598 ops/ms
|±6.501475 ops/ms

|12
|unfold_olivier2
|223.299344 ops/ms
|±3.529855 ops/ms

|13
|unfold_henri_newarray
|201.747344 ops/ms
|±0.886876 ops/ms

|14
|unfold_henri_unsafe
|211.269022 ops/ms
|±12.196076 ops/ms

|15
|unfold_mbo
|204.943294 ops/ms
|±12.28841 ops/ms

|16
|unfold_unfold_common
|30.137366 ops/ms
|±1.285864 ops/ms

|17
|unfold_regexp_compiled
|22.452713 ops/ms
|±0.629956 ops/ms

|18
|unfold_regexp
|20.784072 ops/ms
|±0.90757 ops/ms

|===

// end::jdk7

== Results on JDK 6

// start::jdk6
Please check the CI build image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]
because the results for JDK 6 cannot be automatically fetched.
// end::jdk6

