= The Lecharny Challenge

image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]

The goal of this repository is to check the performance of various implementations of an algorithm that:

* given an input string
* replaces all sequences of `\r\n `, `\n\r `, `\r ` or `\n ` with an empty string

Algorithm *must* be run in the JVM.

= Executing the benchmark

----
./gradlew jmh
----

= Correctness

The current version of the repository doesn't check the correctness of the algorithms. Some have been proposed which
are *incorrect*!

Unit tests can be launched with:

----
./gradlew test
----

= Integration with IntelliJ

To use in IntelliJ, first run:

----
./gradlew idea
----

Then open the generated project.

= Results

Below you will find the *latest results of the benchmark, as executed on Travis CI*. This section is automatically
updated.

// PLEASE DO NOT EDIT BELOW.
// See gradle/results.gradle to understand why!

== Results on JDK 8

// start::jdk8
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy
|14221.014667 ops/ms
|±496.674661 ops/ms

|2
|unfold_cedric_ultimate2_ternary
|13604.123213 ops/ms
|±369.327538 ops/ms

|3
|unfold_cedric_ultimate2
|13583.830396 ops/ms
|±474.123527 ops/ms

|4
|unfold_cedric_ultimate
|13017.544412 ops/ms
|±407.418783 ops/ms

|5
|unfold_henri_noplusplus
|12496.471417 ops/ms
|±586.515226 ops/ms

|6
|unfold_olivier2
|12207.576155 ops/ms
|±389.308607 ops/ms

|7
|unfold_cedric_ultimate2_with_else
|12508.689179 ops/ms
|±989.16879 ops/ms

|8
|unfold_cedric_improved
|11752.9972 ops/ms
|±528.324966 ops/ms

|9
|unfold_henri_newarray
|11097.88881 ops/ms
|±486.926975 ops/ms

|10
|unfold_cedric
|10783.099659 ops/ms
|±557.921475 ops/ms

|11
|unfold_henri_submethods
|11355.890835 ops/ms
|±1230.593534 ops/ms

|12
|unfold_henri_unsafe
|9617.579487 ops/ms
|±419.431288 ops/ms

|13
|unfold_henri_arraycopy
|9027.66253 ops/ms
|±269.27293 ops/ms

|14
|unfold_mbo
|4594.037919 ops/ms
|±219.228534 ops/ms

|15
|unfold_unfold_common
|2489.526437 ops/ms
|±171.788441 ops/ms

|16
|unfold_regexp_compiled
|1478.694396 ops/ms
|±51.497268 ops/ms

|17
|unfold_regexp
|555.651459 ops/ms
|±50.92361 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_henri_noplusplus
|2619.214729 ops/ms
|±151.004221 ops/ms

|2
|unfold_cedric_groovy
|2544.437639 ops/ms
|±80.055424 ops/ms

|3
|unfold_cedric_ultimate2_with_else
|2540.949663 ops/ms
|±145.312812 ops/ms

|4
|unfold_henri_submethods
|2662.73014 ops/ms
|±307.298109 ops/ms

|5
|unfold_cedric_ultimate2_ternary
|2407.333155 ops/ms
|±95.091846 ops/ms

|6
|unfold_cedric_ultimate2
|2472.582145 ops/ms
|±187.495402 ops/ms

|7
|unfold_henri_unsafe
|2495.619603 ops/ms
|±216.561312 ops/ms

|8
|unfold_cedric
|2132.903586 ops/ms
|±99.302303 ops/ms

|9
|unfold_cedric_ultimate
|2092.367226 ops/ms
|±118.900089 ops/ms

|10
|unfold_cedric_improved
|1939.89277 ops/ms
|±88.367533 ops/ms

|11
|unfold_henri_arraycopy
|1747.377234 ops/ms
|±44.816208 ops/ms

|12
|unfold_henri_newarray
|1753.926802 ops/ms
|±72.607119 ops/ms

|13
|unfold_olivier2
|1699.185629 ops/ms
|±77.392409 ops/ms

|14
|unfold_mbo
|1525.065879 ops/ms
|±80.017772 ops/ms

|15
|unfold_unfold_common
|706.841443 ops/ms
|±35.753593 ops/ms

|16
|unfold_regexp_compiled
|270.230495 ops/ms
|±5.984701 ops/ms

|17
|unfold_regexp
|151.893589 ops/ms
|±12.747986 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate2_ternary
|286.840726 ops/ms
|±11.408906 ops/ms

|2
|unfold_cedric_ultimate2_with_else
|271.657021 ops/ms
|±7.744968 ops/ms

|3
|unfold_cedric
|266.592416 ops/ms
|±8.37832 ops/ms

|4
|unfold_henri_noplusplus
|260.01759 ops/ms
|±7.645768 ops/ms

|5
|unfold_cedric_groovy
|251.797443 ops/ms
|±7.541981 ops/ms

|6
|unfold_cedric_ultimate2
|255.439421 ops/ms
|±18.774835 ops/ms

|7
|unfold_henri_submethods
|253.810971 ops/ms
|±18.308284 ops/ms

|8
|unfold_cedric_ultimate
|244.18613 ops/ms
|±8.776756 ops/ms

|9
|unfold_cedric_improved
|245.031741 ops/ms
|±12.385899 ops/ms

|10
|unfold_henri_unsafe
|241.0481 ops/ms
|±15.939166 ops/ms

|11
|unfold_henri_newarray
|220.313258 ops/ms
|±21.349362 ops/ms

|12
|unfold_olivier2
|182.151405 ops/ms
|±4.861041 ops/ms

|13
|unfold_mbo
|161.33656 ops/ms
|±6.977818 ops/ms

|14
|unfold_henri_arraycopy
|152.719096 ops/ms
|±5.613675 ops/ms

|15
|unfold_unfold_common
|45.988387 ops/ms
|±0.612472 ops/ms

|16
|unfold_regexp_compiled
|17.203766 ops/ms
|±1.147402 ops/ms

|17
|unfold_regexp
|16.984417 ops/ms
|±1.153243 ops/ms

|===

// end::jdk8

== Results on JDK 7

// start::jdk7
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_improved
|11708.088072 ops/ms
|±492.189306 ops/ms

|2
|unfold_cedric_ultimate
|10867.465583 ops/ms
|±753.976878 ops/ms

|3
|unfold_cedric_groovy
|10568.91462 ops/ms
|±867.441114 ops/ms

|4
|unfold_cedric
|10052.506246 ops/ms
|±587.082428 ops/ms

|5
|unfold_olivier2
|9428.02861 ops/ms
|±489.619991 ops/ms

|6
|unfold_henri_noplusplus
|9073.268869 ops/ms
|±561.040691 ops/ms

|7
|unfold_cedric_ultimate2_with_else
|8966.051674 ops/ms
|±746.202889 ops/ms

|8
|unfold_cedric_ultimate2
|8941.743826 ops/ms
|±802.021244 ops/ms

|9
|unfold_cedric_ultimate2_ternary
|8172.13267 ops/ms
|±359.34721 ops/ms

|10
|unfold_henri_submethods
|8317.214145 ops/ms
|±647.257518 ops/ms

|11
|unfold_henri_newarray
|7822.011481 ops/ms
|±500.722702 ops/ms

|12
|unfold_henri_unsafe
|7614.618214 ops/ms
|±305.663031 ops/ms

|13
|unfold_henri_arraycopy
|7358.171401 ops/ms
|±926.930897 ops/ms

|14
|unfold_mbo
|4451.070809 ops/ms
|±715.447485 ops/ms

|15
|unfold_unfold_common
|2495.57951 ops/ms
|±104.114707 ops/ms

|16
|unfold_regexp_compiled
|1026.024497 ops/ms
|±51.920153 ops/ms

|17
|unfold_regexp
|593.57101 ops/ms
|±15.228805 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy
|2516.46652 ops/ms
|±255.594471 ops/ms

|2
|unfold_cedric
|2264.65885 ops/ms
|±85.137781 ops/ms

|3
|unfold_henri_unsafe
|1925.146387 ops/ms
|±74.564316 ops/ms

|4
|unfold_cedric_ultimate2
|2047.695825 ops/ms
|±211.05379 ops/ms

|5
|unfold_henri_noplusplus
|2029.433664 ops/ms
|±235.247317 ops/ms

|6
|unfold_olivier2
|1843.181827 ops/ms
|±98.767399 ops/ms

|7
|unfold_cedric_ultimate2_with_else
|1921.970985 ops/ms
|±186.432453 ops/ms

|8
|unfold_henri_newarray
|1886.285164 ops/ms
|±160.891357 ops/ms

|9
|unfold_cedric_improved
|1871.900954 ops/ms
|±148.518889 ops/ms

|10
|unfold_henri_submethods
|1787.515227 ops/ms
|±151.232683 ops/ms

|11
|unfold_henri_arraycopy
|1737.241479 ops/ms
|±184.874586 ops/ms

|12
|unfold_cedric_ultimate
|1767.808969 ops/ms
|±233.82521 ops/ms

|13
|unfold_cedric_ultimate2_ternary
|1510.068156 ops/ms
|±113.447929 ops/ms

|14
|unfold_mbo
|1359.904697 ops/ms
|±191.097231 ops/ms

|15
|unfold_unfold_common
|643.827465 ops/ms
|±38.256722 ops/ms

|16
|unfold_regexp
|160.688509 ops/ms
|±10.920091 ops/ms

|17
|unfold_regexp_compiled
|159.244671 ops/ms
|±13.82211 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy
|231.563951 ops/ms
|±18.18659 ops/ms

|2
|unfold_cedric_ultimate2
|229.072049 ops/ms
|±25.969982 ops/ms

|3
|unfold_henri_submethods
|217.676161 ops/ms
|±17.277089 ops/ms

|4
|unfold_cedric_improved
|210.550283 ops/ms
|±13.995668 ops/ms

|5
|unfold_cedric_ultimate2_ternary
|207.81327 ops/ms
|±13.538618 ops/ms

|6
|unfold_cedric
|205.061193 ops/ms
|±11.663233 ops/ms

|7
|unfold_cedric_ultimate
|196.725487 ops/ms
|±14.263035 ops/ms

|8
|unfold_henri_unsafe
|183.978834 ops/ms
|±8.139983 ops/ms

|9
|unfold_cedric_ultimate2_with_else
|191.177983 ops/ms
|±17.565851 ops/ms

|10
|unfold_henri_noplusplus
|187.110686 ops/ms
|±14.764798 ops/ms

|11
|unfold_henri_newarray
|186.165058 ops/ms
|±14.200747 ops/ms

|12
|unfold_olivier2
|178.572134 ops/ms
|±7.932929 ops/ms

|13
|unfold_henri_arraycopy
|165.672293 ops/ms
|±14.211419 ops/ms

|14
|unfold_mbo
|153.162284 ops/ms
|±10.456265 ops/ms

|15
|unfold_unfold_common
|31.095927 ops/ms
|±2.074962 ops/ms

|16
|unfold_regexp
|18.929292 ops/ms
|±0.497371 ops/ms

|17
|unfold_regexp_compiled
|18.280315 ops/ms
|±0.789771 ops/ms

|===

// end::jdk7

== Results on JDK 6

// start::jdk6
Please check the CI build image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]
because the results for JDK 6 cannot be automatically fetched.
// end::jdk6

