= The Lecharny Challenge

image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]

The goal of this repository is to check the performance of various implementations of an algorithm that:

* given an input string
* replaces all sequences of `\r\n `, `\n\r `, `\r ` or `\n ` with an empty string

Algorithm *must* be run in the JVM.

= Executing the benchmark

----
./gradlew jmh
----

= Correctness

The current version of the repository doesn't check the correctness of the algorithms. Some have been proposed which
are *incorrect*!

Unit tests can be launched with:

----
./gradlew test
----

= Integration with IntelliJ

To use in IntelliJ, first run:

----
./gradlew idea
----

Then open the generated project.

= Results

Below you will find the *latest results of the benchmark, as executed on Travis CI*. This section is automatically
updated.

// PLEASE DO NOT EDIT BELOW.
// See gradle/results.gradle to understand why!

== Results on JDK 8

// start::jdk8
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate2
|12667.617082 ops/ms
|±287.440338 ops/ms

|2
|unfold_cedric_groovy
|12390.185334 ops/ms
|±429.493437 ops/ms

|3
|unfold_cedric_improved
|11848.499829 ops/ms
|±367.684949 ops/ms

|4
|unfold_cedric_ultimate
|11358.598944 ops/ms
|±410.078915 ops/ms

|5
|unfold_cedric_ultimate2_ternary
|11023.392681 ops/ms
|±421.748013 ops/ms

|6
|unfold_henri_noplusplus
|11189.30692 ops/ms
|±699.172986 ops/ms

|7
|unfold_henri_submethods
|11120.118585 ops/ms
|±782.855042 ops/ms

|8
|unfold_cedric_ultimate2_with_else
|11071.47924 ops/ms
|±806.554297 ops/ms

|9
|unfold_cedric
|10000.893411 ops/ms
|±634.108092 ops/ms

|10
|unfold_olivier2
|9547.154079 ops/ms
|±847.356744 ops/ms

|11
|unfold_henri_newarray
|8756.432032 ops/ms
|±241.504613 ops/ms

|12
|unfold_henri_arraycopy
|8062.261379 ops/ms
|±221.309565 ops/ms

|13
|unfold_henri_unsafe
|8365.257906 ops/ms
|±691.709401 ops/ms

|14
|unfold_mbo
|5146.713538 ops/ms
|±380.523674 ops/ms

|15
|unfold_unfold_common
|2800.47894 ops/ms
|±176.56428 ops/ms

|16
|unfold_regexp_compiled
|1209.532376 ops/ms
|±46.130343 ops/ms

|17
|unfold_regexp
|637.929025 ops/ms
|±41.626947 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate2
|2621.703958 ops/ms
|±159.777981 ops/ms

|2
|unfold_henri_submethods
|2524.222583 ops/ms
|±88.981638 ops/ms

|3
|unfold_cedric_ultimate2_with_else
|2340.240138 ops/ms
|±76.07586 ops/ms

|4
|unfold_henri_unsafe
|2306.892795 ops/ms
|±104.760499 ops/ms

|5
|unfold_henri_noplusplus
|2464.82204 ops/ms
|±282.334281 ops/ms

|6
|unfold_cedric_groovy
|2325.73805 ops/ms
|±172.735411 ops/ms

|7
|unfold_cedric_ultimate
|1998.917689 ops/ms
|±28.060252 ops/ms

|8
|unfold_cedric_ultimate2_ternary
|1979.349105 ops/ms
|±59.782599 ops/ms

|9
|unfold_henri_newarray
|2056.505526 ops/ms
|±148.045797 ops/ms

|10
|unfold_cedric_improved
|1892.001829 ops/ms
|±65.109324 ops/ms

|11
|unfold_cedric
|1772.007321 ops/ms
|±111.885401 ops/ms

|12
|unfold_henri_arraycopy
|1596.696718 ops/ms
|±29.057077 ops/ms

|13
|unfold_olivier2
|1646.190631 ops/ms
|±100.576579 ops/ms

|14
|unfold_mbo
|1280.518229 ops/ms
|±108.842035 ops/ms

|15
|unfold_unfold_common
|716.571028 ops/ms
|±24.35519 ops/ms

|16
|unfold_regexp_compiled
|175.974264 ops/ms
|±8.414906 ops/ms

|17
|unfold_regexp
|151.860408 ops/ms
|±12.33433 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_improved
|263.651876 ops/ms
|±10.323918 ops/ms

|2
|unfold_cedric_ultimate
|245.234545 ops/ms
|±5.782799 ops/ms

|3
|unfold_cedric_ultimate2_ternary
|245.852332 ops/ms
|±15.033128 ops/ms

|4
|unfold_cedric
|230.844966 ops/ms
|±5.776711 ops/ms

|5
|unfold_cedric_groovy
|227.168373 ops/ms
|±5.707654 ops/ms

|6
|unfold_cedric_ultimate2
|230.332093 ops/ms
|±12.10563 ops/ms

|7
|unfold_henri_unsafe
|229.028436 ops/ms
|±12.281827 ops/ms

|8
|unfold_henri_submethods
|223.51064 ops/ms
|±11.353366 ops/ms

|9
|unfold_henri_noplusplus
|212.264344 ops/ms
|±10.44234 ops/ms

|10
|unfold_cedric_ultimate2_with_else
|210.16609 ops/ms
|±28.30606 ops/ms

|11
|unfold_henri_newarray
|176.576633 ops/ms
|±7.623437 ops/ms

|12
|unfold_henri_arraycopy
|143.412507 ops/ms
|±4.225944 ops/ms

|13
|unfold_olivier2
|159.034995 ops/ms
|±24.589193 ops/ms

|14
|unfold_mbo
|116.553663 ops/ms
|±4.594536 ops/ms

|15
|unfold_regexp_compiled
|26.13739 ops/ms
|±1.340678 ops/ms

|16
|unfold_regexp
|26.018412 ops/ms
|±1.233638 ops/ms

|17
|unfold_unfold_common
|25.738587 ops/ms
|±1.739234 ops/ms

|===

// end::jdk8

== Results on JDK 7

// start::jdk7
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate
|13257.089419 ops/ms
|±457.389355 ops/ms

|2
|unfold_cedric_improved
|12434.426831 ops/ms
|±455.162251 ops/ms

|3
|unfold_henri_noplusplus
|12101.632513 ops/ms
|±380.113427 ops/ms

|4
|unfold_henri_submethods
|12114.925841 ops/ms
|±414.953158 ops/ms

|5
|unfold_cedric_groovy
|11757.915405 ops/ms
|±249.301162 ops/ms

|6
|unfold_cedric_ultimate2_ternary
|12148.676265 ops/ms
|±1175.605574 ops/ms

|7
|unfold_cedric_ultimate2
|11304.307365 ops/ms
|±426.591469 ops/ms

|8
|unfold_henri_newarray
|10872.119195 ops/ms
|±504.141639 ops/ms

|9
|unfold_olivier2
|10779.064724 ops/ms
|±426.840717 ops/ms

|10
|unfold_cedric_ultimate2_with_else
|11019.027763 ops/ms
|±816.812847 ops/ms

|11
|unfold_cedric
|10107.95081 ops/ms
|±185.942942 ops/ms

|12
|unfold_henri_unsafe
|8679.853965 ops/ms
|±292.751549 ops/ms

|13
|unfold_henri_arraycopy
|7850.459443 ops/ms
|±242.24237 ops/ms

|14
|unfold_mbo
|6016.653112 ops/ms
|±140.442352 ops/ms

|15
|unfold_unfold_common
|2946.501241 ops/ms
|±128.873103 ops/ms

|16
|unfold_regexp_compiled
|1419.006414 ops/ms
|±45.835899 ops/ms

|17
|unfold_regexp
|665.779123 ops/ms
|±22.93888 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_henri_submethods
|2953.952792 ops/ms
|±239.59934 ops/ms

|2
|unfold_cedric_ultimate
|2716.997579 ops/ms
|±68.789275 ops/ms

|3
|unfold_henri_noplusplus
|2721.300517 ops/ms
|±115.376636 ops/ms

|4
|unfold_cedric
|2791.148284 ops/ms
|±214.402201 ops/ms

|5
|unfold_henri_newarray
|2631.678965 ops/ms
|±98.459198 ops/ms

|6
|unfold_cedric_ultimate2_ternary
|2599.550083 ops/ms
|±101.271711 ops/ms

|7
|unfold_cedric_ultimate2
|2476.48612 ops/ms
|±88.483292 ops/ms

|8
|unfold_cedric_groovy
|2556.389245 ops/ms
|±174.515017 ops/ms

|9
|unfold_cedric_ultimate2_with_else
|2316.978491 ops/ms
|±106.667403 ops/ms

|10
|unfold_cedric_improved
|2065.509065 ops/ms
|±73.015879 ops/ms

|11
|unfold_henri_arraycopy
|1933.439319 ops/ms
|±133.046439 ops/ms

|12
|unfold_olivier2
|1844.975371 ops/ms
|±58.751512 ops/ms

|13
|unfold_henri_unsafe
|1780.348392 ops/ms
|±154.709892 ops/ms

|14
|unfold_mbo
|1606.009022 ops/ms
|±51.000683 ops/ms

|15
|unfold_unfold_common
|615.090081 ops/ms
|±14.140515 ops/ms

|16
|unfold_regexp_compiled
|200.897723 ops/ms
|±3.85697 ops/ms

|17
|unfold_regexp
|170.042141 ops/ms
|±4.278985 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_henri_newarray
|291.59509 ops/ms
|±5.773144 ops/ms

|2
|unfold_henri_noplusplus
|290.22432 ops/ms
|±9.572997 ops/ms

|3
|unfold_henri_submethods
|291.517869 ops/ms
|±12.637043 ops/ms

|4
|unfold_cedric_ultimate2
|276.280935 ops/ms
|±9.365838 ops/ms

|5
|unfold_cedric_ultimate
|284.650428 ops/ms
|±20.024831 ops/ms

|6
|unfold_henri_unsafe
|261.231095 ops/ms
|±4.897238 ops/ms

|7
|unfold_cedric_groovy
|260.945334 ops/ms
|±5.617983 ops/ms

|8
|unfold_cedric
|264.115656 ops/ms
|±10.687496 ops/ms

|9
|unfold_cedric_ultimate2_with_else
|264.90202 ops/ms
|±12.791928 ops/ms

|10
|unfold_henri_arraycopy
|245.069856 ops/ms
|±7.39498 ops/ms

|11
|unfold_cedric_ultimate2_ternary
|246.194636 ops/ms
|±20.518571 ops/ms

|12
|unfold_cedric_improved
|239.594673 ops/ms
|±13.944885 ops/ms

|13
|unfold_olivier2
|192.780954 ops/ms
|±6.522814 ops/ms

|14
|unfold_mbo
|184.21949 ops/ms
|±5.787181 ops/ms

|15
|unfold_unfold_common
|39.529314 ops/ms
|±1.242684 ops/ms

|16
|unfold_regexp_compiled
|20.223859 ops/ms
|±0.370005 ops/ms

|17
|unfold_regexp
|19.509245 ops/ms
|±0.246261 ops/ms

|===

// end::jdk7

== Results on JDK 6

// start::jdk6
Please check the CI build image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]
because the results for JDK 6 cannot be automatically fetched.
// end::jdk6

