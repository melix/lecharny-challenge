= The Lecharny Challenge

image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]

The goal of this repository is to check the performance of various implementations of an algorithm that:

* given an input string
* replaces all sequences of `\r\n `, `\n\r `, `\r ` or `\n ` with an empty string

Algorithm *must* be run in the JVM.

= Executing the benchmark

----
./gradlew jmh
----

= Correctness

The current version of the repository doesn't check the correctness of the algorithms. Some have been proposed which
are *incorrect*!

Unit tests can be launched with:

----
./gradlew test
----

= Integration with IntelliJ

To use in IntelliJ, first run:

----
./gradlew idea
----

Then open the generated project.

= Results

Below you will find the *latest results of the benchmark, as executed on Travis CI*. This section is automatically
updated.

// PLEASE DO NOT EDIT BELOW.
// See gradle/results.gradle to understand why!

== Results on JDK 8

// start::jdk8
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate2_with_else
|9719.756336 ops/ms
|±600.30158 ops/ms

|2
|unfold_henri_submethods
|9477.279253 ops/ms
|±531.885129 ops/ms

|3
|unfold_cedric_ultimate2
|9032.483531 ops/ms
|±593.48166 ops/ms

|4
|unfold_henri_noplusplus
|9184.509606 ops/ms
|±770.017644 ops/ms

|5
|unfold_cedric_groovy_bytecode
|9006.728414 ops/ms
|±712.317616 ops/ms

|6
|unfold_cedric_groovy
|8597.123031 ops/ms
|±757.928236 ops/ms

|7
|unfold_olivier2
|7592.176128 ops/ms
|±370.67849 ops/ms

|8
|unfold_cedric_ultimate
|7625.092081 ops/ms
|±465.997611 ops/ms

|9
|unfold_henri_unsafe
|7547.842925 ops/ms
|±500.439131 ops/ms

|10
|unfold_cedric_ultimate2_ternary
|7134.93133 ops/ms
|±287.822557 ops/ms

|11
|unfold_cedric_improved
|7428.555738 ops/ms
|±909.536608 ops/ms

|12
|unfold_henri_newarray
|6807.767659 ops/ms
|±442.921639 ops/ms

|13
|unfold_cedric
|6819.849248 ops/ms
|±521.97548 ops/ms

|14
|unfold_henri_arraycopy
|6286.987363 ops/ms
|±261.887567 ops/ms

|15
|unfold_mbo
|4155.417683 ops/ms
|±189.991489 ops/ms

|16
|unfold_unfold_common
|2339.875209 ops/ms
|±162.820194 ops/ms

|17
|unfold_regexp_compiled
|1297.949383 ops/ms
|±107.505078 ops/ms

|18
|unfold_regexp
|558.809827 ops/ms
|±41.248569 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate2_ternary
|2064.33185 ops/ms
|±115.728209 ops/ms

|2
|unfold_henri_unsafe
|1928.195694 ops/ms
|±156.982233 ops/ms

|3
|unfold_henri_newarray
|1925.908734 ops/ms
|±155.769404 ops/ms

|4
|unfold_cedric_ultimate2
|1912.694141 ops/ms
|±148.161391 ops/ms

|5
|unfold_cedric_ultimate
|1790.886327 ops/ms
|±94.363531 ops/ms

|6
|unfold_henri_submethods
|1717.581502 ops/ms
|±70.692312 ops/ms

|7
|unfold_henri_noplusplus
|1751.137052 ops/ms
|±119.867698 ops/ms

|8
|unfold_cedric_ultimate2_with_else
|1771.631603 ops/ms
|±144.407218 ops/ms

|9
|unfold_cedric
|1713.064938 ops/ms
|±123.722261 ops/ms

|10
|unfold_cedric_groovy
|1657.117704 ops/ms
|±94.586165 ops/ms

|11
|unfold_cedric_groovy_bytecode
|1629.536561 ops/ms
|±81.087869 ops/ms

|12
|unfold_olivier2
|1392.147869 ops/ms
|±104.153167 ops/ms

|13
|unfold_cedric_improved
|1332.814914 ops/ms
|±82.98971 ops/ms

|14
|unfold_henri_arraycopy
|1202.216681 ops/ms
|±36.222045 ops/ms

|15
|unfold_mbo
|896.612862 ops/ms
|±96.200972 ops/ms

|16
|unfold_unfold_common
|497.562799 ops/ms
|±16.405485 ops/ms

|17
|unfold_regexp_compiled
|155.234846 ops/ms
|±5.50469 ops/ms

|18
|unfold_regexp
|132.996242 ops/ms
|±5.534889 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.8.0_31-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_ultimate2_ternary
|204.574971 ops/ms
|±12.385416 ops/ms

|2
|unfold_cedric_ultimate2
|189.309315 ops/ms
|±6.380981 ops/ms

|3
|unfold_henri_noplusplus
|190.842456 ops/ms
|±8.83376 ops/ms

|4
|unfold_henri_unsafe
|188.261503 ops/ms
|±8.079704 ops/ms

|5
|unfold_henri_submethods
|182.868583 ops/ms
|±8.132324 ops/ms

|6
|unfold_cedric_improved
|180.389425 ops/ms
|±7.46987 ops/ms

|7
|unfold_cedric_ultimate2_with_else
|184.978887 ops/ms
|±14.549239 ops/ms

|8
|unfold_cedric_ultimate
|182.216042 ops/ms
|±13.046516 ops/ms

|9
|unfold_cedric_groovy
|169.458849 ops/ms
|±9.007224 ops/ms

|10
|unfold_cedric
|162.213338 ops/ms
|±8.602026 ops/ms

|11
|unfold_henri_newarray
|158.448624 ops/ms
|±8.947017 ops/ms

|12
|unfold_cedric_groovy_bytecode
|155.181573 ops/ms
|±16.341195 ops/ms

|13
|unfold_olivier2
|123.949979 ops/ms
|±7.260995 ops/ms

|14
|unfold_henri_arraycopy
|118.01587 ops/ms
|±5.582282 ops/ms

|15
|unfold_mbo
|96.991172 ops/ms
|±6.920934 ops/ms

|16
|unfold_unfold_common
|39.397318 ops/ms
|±1.07304 ops/ms

|17
|unfold_regexp_compiled
|22.338522 ops/ms
|±0.907225 ops/ms

|18
|unfold_regexp
|16.107332 ops/ms
|±0.489135 ops/ms

|===

// end::jdk8

== Results on JDK 7

// start::jdk7
[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *10* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_cedric_groovy_bytecode
|10447.367284 ops/ms
|±943.677531 ops/ms

|2
|unfold_cedric_improved
|10000.413697 ops/ms
|±777.966863 ops/ms

|3
|unfold_cedric_ultimate2_with_else
|9772.979239 ops/ms
|±586.474264 ops/ms

|4
|unfold_henri_newarray
|9680.947689 ops/ms
|±553.183001 ops/ms

|5
|unfold_cedric_ultimate
|9488.088308 ops/ms
|±464.0313 ops/ms

|6
|unfold_henri_noplusplus
|10060.051727 ops/ms
|±1196.631836 ops/ms

|7
|unfold_cedric_ultimate2
|9607.115659 ops/ms
|±877.470614 ops/ms

|8
|unfold_henri_submethods
|9539.767176 ops/ms
|±847.270179 ops/ms

|9
|unfold_olivier2
|8487.402735 ops/ms
|±123.183405 ops/ms

|10
|unfold_cedric_ultimate2_ternary
|9049.926165 ops/ms
|±940.774379 ops/ms

|11
|unfold_cedric_groovy
|8238.32661 ops/ms
|±819.904022 ops/ms

|12
|unfold_henri_arraycopy
|7352.460111 ops/ms
|±362.230906 ops/ms

|13
|unfold_henri_unsafe
|7173.073694 ops/ms
|±255.814391 ops/ms

|14
|unfold_cedric
|7756.448389 ops/ms
|±1094.909926 ops/ms

|15
|unfold_mbo
|4759.590558 ops/ms
|±167.250419 ops/ms

|16
|unfold_unfold_common
|2252.269396 ops/ms
|±191.417826 ops/ms

|17
|unfold_regexp_compiled
|971.45657 ops/ms
|±50.186393 ops/ms

|18
|unfold_regexp
|532.896922 ops/ms
|±17.732605 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *100* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_henri_noplusplus
|2253.605679 ops/ms
|±90.686935 ops/ms

|2
|unfold_henri_submethods
|2151.954678 ops/ms
|±92.815011 ops/ms

|3
|unfold_cedric_groovy
|2079.616685 ops/ms
|±112.042981 ops/ms

|4
|unfold_henri_newarray
|2103.856222 ops/ms
|±179.795703 ops/ms

|5
|unfold_cedric_groovy_bytecode
|2014.047192 ops/ms
|±90.792909 ops/ms

|6
|unfold_cedric_ultimate
|1932.574098 ops/ms
|±76.570285 ops/ms

|7
|unfold_cedric_ultimate2_with_else
|2002.0419 ops/ms
|±203.656578 ops/ms

|8
|unfold_cedric_ultimate2
|1978.728962 ops/ms
|±229.203483 ops/ms

|9
|unfold_cedric
|1811.451595 ops/ms
|±127.702859 ops/ms

|10
|unfold_cedric_ultimate2_ternary
|1792.440726 ops/ms
|±144.737238 ops/ms

|11
|unfold_henri_unsafe
|1704.774986 ops/ms
|±62.351577 ops/ms

|12
|unfold_cedric_improved
|1728.626784 ops/ms
|±99.582713 ops/ms

|13
|unfold_henri_arraycopy
|1602.344265 ops/ms
|±73.629377 ops/ms

|14
|unfold_olivier2
|1556.87554 ops/ms
|±97.194389 ops/ms

|15
|unfold_mbo
|1348.39979 ops/ms
|±39.346164 ops/ms

|16
|unfold_unfold_common
|501.40006 ops/ms
|±11.469632 ops/ms

|17
|unfold_regexp_compiled
|159.608084 ops/ms
|±7.864828 ops/ms

|18
|unfold_regexp
|131.171988 ops/ms
|±8.569649 ops/ms

|===

[cols="1,3,2,2", options="header"]
.Table Benchmark results for string of length *1000* on 1.7.0_75-b13
|===
|Rank |Method name |Score | Error (99.9%)
|1
|unfold_henri_submethods
|240.805355 ops/ms
|±12.422461 ops/ms

|2
|unfold_cedric_ultimate2_ternary
|236.680344 ops/ms
|±9.546437 ops/ms

|3
|unfold_henri_noplusplus
|244.201515 ops/ms
|±19.09695 ops/ms

|4
|unfold_cedric_groovy_bytecode
|228.710081 ops/ms
|±8.785084 ops/ms

|5
|unfold_cedric_ultimate2_with_else
|228.356548 ops/ms
|±9.847367 ops/ms

|6
|unfold_cedric_groovy
|218.471217 ops/ms
|±7.689803 ops/ms

|7
|unfold_henri_newarray
|218.02692 ops/ms
|±7.356237 ops/ms

|8
|unfold_cedric_ultimate
|220.272971 ops/ms
|±15.447699 ops/ms

|9
|unfold_henri_unsafe
|206.36332 ops/ms
|±6.886083 ops/ms

|10
|unfold_henri_arraycopy
|203.951867 ops/ms
|±9.503665 ops/ms

|11
|unfold_cedric_ultimate2
|212.220964 ops/ms
|±20.203549 ops/ms

|12
|unfold_cedric_improved
|201.095147 ops/ms
|±15.559922 ops/ms

|13
|unfold_cedric
|179.463255 ops/ms
|±13.24793 ops/ms

|14
|unfold_olivier2
|166.302393 ops/ms
|±9.649212 ops/ms

|15
|unfold_mbo
|149.530997 ops/ms
|±5.492988 ops/ms

|16
|unfold_unfold_common
|30.285721 ops/ms
|±2.137001 ops/ms

|17
|unfold_regexp_compiled
|17.910474 ops/ms
|±0.255222 ops/ms

|18
|unfold_regexp
|15.949287 ops/ms
|±1.020637 ops/ms

|===

// end::jdk7

== Results on JDK 6

// start::jdk6
Please check the CI build image:https://travis-ci.org/melix/lecharny-challenge.svg?branch=master["Build Status", link="https://travis-ci.org/melix/lecharny-challenge"]
because the results for JDK 6 cannot be automatically fetched.
// end::jdk6

